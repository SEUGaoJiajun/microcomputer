STACK SEGMENT STACK
DW 200H DUP(?)
STACK ENDS
DATA SEGMENT
NUM DB ?
BUF DB "OK"
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,SS:STACK,DS:DATA
DELAY PROC       ;延时1s过程                        
      PUSH CX
      PUSH AX
      MOV AX,08FFFH
S:    MOV CX,0FFFFH
F:    DEC CX
      JNE F
      DEC AX
      JNE S          ;循环套循环加强延时效果
      POP AX
      POP CX
      RET
DELAY ENDP
SHOW1 PROC FAR
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH DX
	MOV AH,15
	INT 10H
	MOV AH,0
	INT 10H
	MOV CX,1
	MOV DX,0
R:	MOV AH,2
	INT 10H
	MOV AL,0FH
	MOV AH,10
	INT 10H
	CALL DELAY
	CMP NUM,10		;补充
	JNB OVER
	INC DH
	ADD DL,2
	CMP DH,25
	JNE R
OVER:	POP DX
	POP CX
	POP BX
	POP AX
        RET
SHOW1 ENDP
SHOW2 PROC FAR
	PUSH CX
	PUSH BX
	PUSH AX
	CMP NUM,10
	JA QUT
	MOV CX,2
N:	LODSB					;
	MOV AH,0EH
	MOV BX,01
	INT 10H
	CALL DELAY
	LOOP N
QUT:	POP AX
	POP BX
	POP CX
	RET
SHOW2 ENDP
KBINT PROC FAR
	PUSH AX
	PUSH SI
	STI
	IN AL,60H
	MOV AH,AL
	IN AL,61H
	OR AL,80H
	OUT 61H,AL
	AND AL,7FH
	OUT 61H,AL
	TEST AH,80H
	JNE GO
	STI
	INC NUM
	MOV SI,OFFSET BUF
	CALL SHOW2
GO:	MOV AL,20H
	OUT 20H,AL
	POP SI
	POP AX
	IRET
KBINT ENDP
BEGIN:	MOV AX,STACK
	MOV SS,AX
	MOV AX,DATA
	MOV DS,AX
	MOV AX,0
	MOV ES,AX
	MOV AX,ES:[24H]
	PUSH AX
	MOV AX,ES:[26H]
	PUSH AX
	CLI
	MOV AX,OFFSET KBINT
	MOV ES:[24H],AX
	MOV AX,SEG KBINT
	MOV ES:[26H],AX
	STI
	MOV NUM,0
AGAIN:	CALL SHOW1
	CMP NUM,10
	JB AGAIN
	CLI
	POP AX
	MOV ES:[26H],AX
	POP AX
	MOV ES:[24H],AX
	STI
	MOV AH,4CH
	INT 21H
CODE ENDS
	END BEGIN
